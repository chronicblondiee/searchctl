filters_json_app:
  workers: ${FILTER_WORKERS:2}
  delay: ${FILTER_DELAY_MS:100}
  source:
    http:
      port: ${FILTER_JSON_HTTP_PORT:2122}
  processor:
  - json:
      source: message
  - date:
      match: [ "@timestamp", "ISO8601", "yyyy-MM-dd'T'HH:mm:ss.SSSZZ" ]
      target: "@timestamp"
      timezone: "UTC"
  - lowercase_strings:
      keys: [ "level" ]
  - rename_keys:
      mappings:
        host: host.name
  sink:
  - opensearch:
      hosts: [ "${OPENSEARCH_HOSTS:https://localhost:9200}" ]
      username: "${OPENSEARCH_USERNAME:admin}"
      password: "${OPENSEARCH_PASSWORD:admin}"
      index: "${OS_INDEX_FILTER_JSON:logs-app-json}"
      ssl: ${OS_SSL:true}
      insecure: ${OS_INSECURE:false}
