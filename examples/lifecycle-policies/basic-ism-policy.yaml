kind: LifecyclePolicy
metadata:
  name: basic-log-rotation-ism
spec:
  policy:
    description: "Basic ISM policy for log rotation"
    default_state: "hot"
    states:
      - name: "hot"
        actions:
          - rollover:
              min_size: "10gb"
              min_doc_count: 1000000
              min_index_age: "7d"
        transitions:
          - state_name: "warm"
            conditions:
              min_index_age: "7d"
      - name: "warm"
        actions:
          - replica_count:
              number_of_replicas: 0
          - force_merge:
              max_num_segments: 1
        transitions:
          - state_name: "cold"
            conditions:
              min_index_age: "30d"
      - name: "cold"
        actions:
          - replica_count:
              number_of_replicas: 0
        transitions:
          - state_name: "delete"
            conditions:
              min_index_age: "90d"
      - name: "delete"
        actions:
          - delete: {}